(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fda9fc4"],{"1a44d":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,"",""])},2909:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){if(Array.isArray(e))return r(e)}function a(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function o(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return i(e)||a(e)||o(e)||s()}n.d(t,"a",(function(){return c}))},"37e2":function(e,t,n){"use strict";var r={name:"ItemGroup",props:{title:{type:String,default:"",required:!0},required:{type:Boolean,default:!1}},data:function(){return{}},methods:{}},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"itemGroup"},[n("div",{staticClass:"itemGroup_title",class:{itemGroup_title_required:e.required}},[e._v(e._s(e.title))]),e._v(" "),e._t("default")],2)},a=[],o=n("2455");function s(e){n("b742")}var c=!1,l=s,u="data-v-7677f8c8",f=null,d=Object(o["a"])(r,i,a,c,l,u,f);t["a"]=d.exports},5118:function(e,t,n){(function(e){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n("6017"),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("c8ba"))},6017:function(e,t,n){(function(e,t){(function(e,n){"use strict";if(!e.setImmediate){var r,i=1,a={},o=!1,s=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?p():m()?h():e.MessageChannel?v():s&&"onreadystatechange"in s.createElement("script")?g():b(),c.setImmediate=l,c.clearImmediate=u}function l(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return a[i]=o,r(i),i++}function u(e){delete a[e]}function f(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r);break}}function d(e){if(o)setTimeout(d,0,e);else{var t=a[e];if(t){o=!0;try{f(t)}finally{u(e),o=!1}}}}function p(){r=function(e){t.nextTick((function(){d(e)}))}}function m(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function h(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&d(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}function v(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;d(t)},r=function(t){e.port2.postMessage(t)}}function g(){var e=s.documentElement;r=function(t){var n=s.createElement("script");n.onreadystatechange=function(){d(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function b(){r=function(e){setTimeout(d,0,e)}}})("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n("c8ba"),n("f28c"))},6261:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n("c080"),i=n("6736"),a=function(e){return Object(r["f"])({url:i["a"].framework.file.uploadFile,formData:e})},o=function(e){return Object(r["b"])({url:i["a"].framework.file.downloadFile+"/"+e})},s=function(e){return Object(r["a"])({url:i["a"].framework.file.deleteFile+"/"+e})}},7746:function(e,t,n){"use strict";n.r(t);n("ac6a"),n("2caf"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54"),n("87b3");var r=n("37e2"),i=n("df99"),a=n("ca00"),o=n("1704"),s="image/*";function c(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function l(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f={name:"AdviceFeedback",components:{ItemGroup:r["a"],SUpload:i["a"]},data:function(){return{loading:!1,access:s,feedBack:{title:"",contact:"",describe:"",images:""},error:{title:"",contact:"",describe:""}}},methods:{getImages:function(){var e=[],t="",n=this.$refs.myupload.getUploadResult();if(n&&n.length>0){var r,i=c(n);try{for(i.s();!(r=i.n()).done;){var a=r.value,o={fileName:a.FileName,fileCode:a.FileCode};e.push(o)}}catch(s){i.e(s)}finally{i.f()}t=JSON.stringify(e)}return t},save:function(){var e=this;this.validateInput()&&(this.images=this.getImages(),this.loading=!0,o["a"].saveFeedBack(this.feedBack).then((function(){e.$toast.success("保存成功"),e.feedBack.title="",e.feedBack.contact="",e.feedBack.describe="",e.feedBack.images="",e.$refs.myupload.refresh()})).catch((function(){})).finally((function(){e.loading=!1})))},validateInput:function(){this.error.title="",this.error.contact="",this.error.describe="";var e=!1;return Object(a["g"])(this.feedBack.title)&&(this.error.title="遇到的问题必填",e=!0),Object(a["g"])(this.feedBack.describe)&&(this.error.describe="描述具体问题必填",e=!0),Object(a["g"])(this.feedBack.contact)&&(this.error.contact="联系方式必填",e=!0),!e}}},d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-content"},[n("item-group",{attrs:{title:"遇到的问题",required:""}},[n("van-field",{attrs:{placeholder:"请输入遇到的问题","error-message":e.error.title},model:{value:e.feedBack.title,callback:function(t){e.$set(e.feedBack,"title",t)},expression:"feedBack.title"}})],1),e._v(" "),n("item-group",{attrs:{title:"描述具体问题",required:""}},[n("van-field",{attrs:{type:"textarea",rows:"2",autosize:"",placeholder:"请输入描述具体问题","error-message":e.error.describe},model:{value:e.feedBack.describe,callback:function(t){e.$set(e.feedBack,"describe",t)},expression:"feedBack.describe"}})],1),e._v(" "),n("item-group",{attrs:{title:"您的联系方式",required:""}},[n("van-field",{attrs:{placeholder:"请输入联系方式","error-message":e.error.contact},model:{value:e.feedBack.contact,callback:function(t){e.$set(e.feedBack,"contact",t)},expression:"feedBack.contact"}})],1),e._v(" "),n("item-group",{attrs:{title:"请提供相关问题的截图或照片"}},[n("s-upload",{ref:"myupload",attrs:{accept:e.access}})],1),e._v(" "),n("div",{staticClass:"operate-area"},[n("van-button",{attrs:{type:"info",loading:e.loading,size:"large"},on:{click:e.save}},[e._v("保存")])],1)],1)},p=[],m=n("2455");function h(e){n("b18e")}var v=!1,g=h,b="data-v-796b2054",y=null,w=Object(m["a"])(f,d,p,v,g,b,y);t["default"]=w.exports},9865:function(e,t,n){"use strict";var r=n("5ca1"),i=n("6821"),a=n("4588"),o=n("9def"),s=[].lastIndexOf,c=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(c||!n("2f21")(s)),"Array",{lastIndexOf:function(e){if(c)return s.apply(this,arguments)||0;var t=i(this),n=o(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,a(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},b18e:function(e,t,n){var r=n("1a44d");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("499e").default;i("7ab939e9",r,!0,{})},b742:function(e,t,n){var r=n("bc6c");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("499e").default;i("42aca0a8",r,!0,{})},bb29:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,"\n.upload-result[data-v-6feaf926] {\n  margin-top: 0.26667rem;\n}\n.upload-result ul[data-v-6feaf926] {\n  width: 100%;\n}\n.upload-result .item[data-v-6feaf926] {\n  margin-left: 0.37333rem;\n  margin-right: 0.26667rem;\n  margin-bottom: 0.26667rem;\n  display: inline-block;\n  position: relative;\n  border: 0.02667rem solid #e4e6f0;\n  width: 2.66667rem;\n  height: 2.66667rem;\n  text-align: center;\n}\n.upload-result .item img[data-v-6feaf926] {\n  width: 2.13333rem;\n  height: 2.13333rem;\n  margin-top: 0.26667rem;\n}\n.upload-result .item .close[data-v-6feaf926] {\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n",""])},bc6c:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,"\n.itemGroup[data-v-7677f8c8] {\n  position: relative;\n}\n.itemGroup .itemGroup_title[data-v-7677f8c8] {\n  height: 1.17333rem;\n  line-height: 1.17333rem;\n  padding-left: 0.48rem;\n  padding-top: 0.13333rem;\n  padding-right: 0;\n  padding-bottom: 0;\n  background-color: #F1F2F7;\n}\n.itemGroup .itemGroup_title_required[data-v-7677f8c8]::before {\n  content: '*';\n  position: absolute;\n  top: 0.16rem;\n  left: 0.13333rem;\n  font-size: 0.32rem;\n  color: #f44;\n}\n",""])},db6f:function(e,t,n){var r=n("bb29");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("499e").default;i("4374d958",r,!0,{})},df99:function(e,t,n){"use strict";n("1c01"),n("58b2"),n("8e6e"),n("d25f"),n("456d"),n("2caf"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54"),n("87b3"),n("6762"),n("9865");var r=n("ade3"),i=(n("57e7"),n("7514"),n("ac6a"),n("f3e2"),n("2909")),a=(n("c5f6"),n("6261")),o=n("ca00"),s=n("5118");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=f(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function f(e,t){if(e){if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p={name:"SUpload",props:{accept:{type:String,default:null},maxFileSize:{type:Number,default:2097152},uploadText:{type:String,default:"正在上传，请稍等"},name:{type:String,default:""},authenticationType:{type:String,default:null},permissions:{type:Array,default:null},updatePermissions:{type:Array,default:null},deletePermissions:{type:Array,default:null},uploadSuccess:{type:Function,default:null,required:!1},needShowResult:{type:Boolean,default:!0,required:!1}},data:function(){return{fileList:[],isDisabled:!1,uploadResult:[],previewImgs:[]}},computed:{hasPreviewImg:function(){return this.needShowResult&&this.previewImgs&&this.previewImgs.length>0}},methods:{refresh:function(){this.fileList=[],this.isDisabled=!1,this.uploadResult=[],this.previewImgs=[]},getUploadResult:function(){return this.uploadResult},beforeRead:function(e,t){var n=this,r=e;this.fileList=[].concat(Object(i["a"])(this.fileList),[r]);var s=new FormData;return this.fileList.forEach((function(e){s.append("files[]",e)})),Object(o["h"])(this.authenticationType)&&s.append("authenticationType",this.authenticationType),Object(o["h"])(this.permissions)&&s.append("permissions",JSON.stringify(this.permissions)),Object(o["h"])(this.updatePermissions)&&s.append("updatePermissions",JSON.stringify(this.updatePermissions)),Object(o["h"])(this.permissions)&&s.append("deletePermissions",JSON.stringify(this.deletePermissions)),this.isDisabled=!0,this.$toast.loading({mask:!0,message:"正在上传，请稍等..."}),Object(a["c"])(s).then((function(e){var t,r=u(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.uploadResult.push(i),n.isImg(i.FileName)&&n.addPrevieImgs(i)}}catch(a){r.e(a)}finally{r.f()}n.uploadSuccess&&n.uploadSuccess(e),n.$toast.success("上传成功")})).catch((function(){})).finally((function(){n.fileList=[],n.isDisabled=!1})),!0},afterRead:function(e,t){console.log("a-file",e.file),console.log("a-detail",t)},removeFile:function(e){var t=this;this.$dialog.confirm({message:"您确认要删除该附件吗"}).then((function(){t.$toast.loading({mask:!0,message:"正在删除，请稍等..."}),Object(a["a"])(e).then((function(n){t.removeItemForUploadResult(e),t.removeItemForPrevieImgs(e),t.$toast.success("删除成功")})).catch((function(){})).finally((function(){}))})).catch((function(){}))},removeItemForUploadResult:function(e){var t=this.uploadResult.find((function(t){return t.FileCode===e}));if(t){var n=this.uploadResult.indexOf(t);this.uploadResult.splice(n,1)}},removeItemForPrevieImgs:function(e){var t=this.previewImgs.find((function(t){return t.FileCode===e}));if(t){var n=this.previewImgs.indexOf(t);this.previewImgs.splice(n,1)}},addPrevieImgs:function(e){var t=this,n=Object(s["setTimeout"])((function(){Object(a["b"])(e.FileCode).then((function(r){window.URL=window.URL||window.webkitURL;var i=window.URL.createObjectURL(r),a=l(l({},e),{},{Url:i});t.previewImgs.push(a),Object(s["clearTimeout"])(n)})).catch((function(){}))}),200)},isImg:function(e){var t=["png","jpg","gif","bmp"],n="",r=e.lastIndexOf(".");return r>-1&&(n=e.substr(r+1)),t.includes(n)}}},m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("van-uploader",{attrs:{accept:e.accept,disabled:e.isDisabled,"max-size":e.maxFileSize,"upload-text":e.uploadText,"before-read":e.beforeRead,"after-read":e.afterRead}},[n("van-icon",{attrs:{name:"plus"}})],1),e._v(" "),e.hasPreviewImg?n("ul",{staticClass:"upload-result"},e._l(e.previewImgs,(function(t,r){return n("li",{key:r,staticClass:"item"},[n("img",{attrs:{src:t.Url,alt:t.FileName,title:t.FileName}}),e._v(" "),n("van-icon",{staticClass:"close",attrs:{name:"clear"},on:{click:function(n){return e.removeFile(t.FileCode)}}})],1)})),0):e._e()],1)},h=[],v=n("2455");function g(e){n("db6f")}var b=!1,y=g,w="data-v-6feaf926",I=null,O=Object(v["a"])(p,m,h,b,y,w,I);t["a"]=O.exports}}]);